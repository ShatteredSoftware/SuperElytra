/*
 * This file was generated by the Gradle 'init' task.
 */

buildscript {
    repositories {
    	maven {
      		url "https://plugins.gradle.org/m2/"
    	}
    }

    dependencies {
        classpath "org.ajoberstar:grgit:1.1.0"
    }
}

plugins {
    id 'java'
    id 'maven-publish'
}

repositories {
    mavenLocal()
    maven {
        url = 'https://repo1.maven.org/maven2'
    }

    maven {
        url = 'https://maven.pkg.github.com/TheNewEconomy/packages'
    }

    maven {
        url = 'https://maven.pkg.github.com/townyadvanced/towny'
    }
}

dependencies {
    compile 'org.spigotmc:spigot-api:1.13-R0.1-SNAPSHOT'
}


ext {
    // Open the Git repository in the current directory.
    git = org.ajoberstar.grgit.Grgit.open(file('.'))
    // Get commit id of HEAD.
    gitRevision = git.head().id
    // Get abbreviated commit Id of HEAD
    gitAbbRevision = git.head().abbreviatedId

    dirty = !git.status().clean
    dirtyStr = ""
    if (dirty) {
        dirtyStr = "-dirty"
    }
}

group = 'eisenwave.elytra'
version = "${project.version}-${gitAbbRevision}${dirtyStr}"
sourceCompatibility = '1.8'

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}
